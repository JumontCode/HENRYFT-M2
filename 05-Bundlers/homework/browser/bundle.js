(()=>{"use strict";function e(){this.subscribers={}}e.prototype.on=function(e,t){this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push(t)},e.prototype.emit=function(e){if(this.subscribers[e]){var t=[].slice.call(arguments,1);this.subscribers[e].forEach((function(e){e.apply(null,t)}))}};let t=new e;var i;[].slice.call(document.querySelectorAll(".marker")).forEach((function(e){e.style.backgroundColor=e.id,e.addEventListener("click",(function(){i=this.id,document.querySelector(".selected").classList.remove("selected"),this.classList.add("selected")}))}));var n=document.getElementById("paint"),o=n.getContext("2d");function s(){o.setTransform(1,0,0,1,0,0);var e=window.devicePixelRatio||1,t=n.clientWidth*e,i=n.clientHeight*e;if(t!==n.width||i!==n.height){var s=o.getImageData(0,0,n.width,n.height);n.width=t,n.height=i,o.putImageData(s,0,0)}o.scale(e,e),o.lineWidth=5,o.lineJoin="round",o.lineCap="round"}s(),window.addEventListener("resize",s);var r={x:0,y:0},c={x:0,y:0},a=!1;n.addEventListener("mousedown",(function(e){a=!0,r.x=e.pageX-this.offsetLeft,r.y=e.pageY-this.offsetTop})),n.addEventListener("mouseup",(function(){a=!1})),n.addEventListener("mousemove",(function(e){a&&(c.x=r.x,c.y=r.y,r.x=e.pageX-this.offsetLeft,r.y=e.pageY-this.offsetTop,t.draw(c,r,i,!0))})),t.draw=function(e,i,n,s){o.beginPath(),o.strokeStyle=n||"black",o.moveTo(e.x,e.y),o.lineTo(i.x,i.y),o.closePath(),o.stroke(),s&&t.emit("draw",e,i,n)};const d=t;let l=io(window.location.origin);l.on("connect",(function(){console.log("Connected!")})),l.on("load",(function(e){e.forEach((function(e){var t=e.start,i=e.end,n=e.color;d.draw(t,i,n,!1)}))})),l.on("draw",(function(e,t,i){d.draw(e,t,i,!1)})),d.on("draw",(function(e,t,i){l.emit("draw",e,t,i)}))})();